# Character AI â€“ Multi-Agent Conversational System
### A Concierge-Style AI Companion Builder using FastAPI, Streamlit, MySQL & Gemini

## ğŸš€ Overview
Character AI is a full-stack multi-agent conversational system where users can:
- Create custom characters ("personas") with unique personalities
- Assign tone, summary, and backstory to each persona
- Chat with each persona separately with context-aware responses
- Maintain complete message history per persona
- Delete personas when no longer needed
- View all personas in an intuitive dashboard
- Interact through a clean, modern Streamlit UI
- Receive responses generated by a sophisticated 3-agent AI pipeline

## ğŸ¯ Problem Statement
People want conversational AIs that behave like specific personalities (Sherlock Holmes, mentors, fictional characters).  
This requires memory, context awareness, tone consistency, and safe responses â€” difficult to implement manually.

## ğŸ’¡ Solution
We built a modular AI system with a multi-agent architecture:
1. **Context Agent** â€“ Summarizes recent conversation history for context
2. **Character Agent** â€“ Generates persona-based replies matching the character's personality
3. **Moderator Agent** â€“ Ensures safe, appropriate, and clean output

Users can:

âœ” Create and customize personas  
âœ” Chat with each persona independently  
âœ” Retrieve full conversation histories  
âœ” Delete personas  
âœ” Enjoy a simple, intuitive UI  

## ğŸ§  Multi-Agent Architecture
![architecture.png](architecture.png)

## ğŸ›  Tech Stack
- **Frontend**: Streamlit
- **Backend**: FastAPI
- **Database**: MySQL
- **LLM**: Google Gemini Flash
- **Language**: Python 3.10+
- **API**: RESTful APIs
- **Containerization**: Docker
- **Deployment**: Hugging Face Spaces

## ğŸ“š Key Features

### Authentication System
- User registration with secure password hashing
- Login with JWT token-based authentication
- Session state management in Streamlit
- Secure password storage using bcrypt

### Persona Builder
- Create custom personas with unique characteristics
- Auto-generation or manual customization modes
- Define tone, personality, and backstory
- Delete personas
- List and manage all user personas

### Chat Engine
- Full conversation history per persona
- Character-consistent replies
- Multi-agent processing pipeline
- Context-aware responses
- Real-time message streaming

## ğŸ“ Project Structure
```
google-kaggle-capstone/
â”œâ”€â”€ Backend/
â”‚   â”œâ”€â”€ main.py              # FastAPI application & API endpoints
â”‚   â”œâ”€â”€ agents.py            # Multi-agent AI logic (Context, Character, Moderator)
â”‚   â”œâ”€â”€ database.py          # Database connection & session management
â”‚   â”œâ”€â”€ schemas.py           # Pydantic models for request/response validation
â”‚   â”œâ”€â”€ utils.py             # Utility functions
â”‚   â”œâ”€â”€ create.sql           # MySQL database schema
â”‚   â”œâ”€â”€ Dockerfile           # Backend containerization
â”‚   â”œâ”€â”€ requirements.txt     # Backend Python dependencies
â”‚   â”œâ”€â”€ .dockerignore        # Docker ignore rules
â”‚   â”œâ”€â”€ .gitignore           # Git ignore rules
â”‚   â””â”€â”€ README.md            # Backend documentation
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ app.py               # Streamlit application
â”‚   â”œâ”€â”€ Dockerfile           # Frontend containerization
â”‚   â”œâ”€â”€ requirements.txt     # Frontend Python dependencies
â”‚   â”œâ”€â”€ .dockerignore        # Docker ignore rules
â”‚   â””â”€â”€ README.md            # Frontend documentation
â”‚
â”œâ”€â”€ .gitignore               # Root Git ignore rules
â”œâ”€â”€ Readme.md                # This file
â”œâ”€â”€ architecture.png         # System architecture diagram
â”œâ”€â”€ demo env                 # Environment variables template
â””â”€â”€ requirements.txt         # Root Python dependencies
```

## ğŸ’¾ Database Schema (MySQL)

### Tables
- **users** â€“ User accounts with authentication credentials
- **persona_flow** â€“ Persona definitions and metadata
- **persona_messages** â€“ Chat message history per persona

See `Backend/create.sql` for complete schema definitions.

## ğŸ”§ Environment Variables

Create a `.env` file in the root directory with the following variables:

```bash
# Database Configuration
DB_HOST="your_database_host"
DB_PASSWORD="your_db_password"
DB_USER="your_db_user"
DB_NAME="your_database_name"
DB_PORT="3306"
DB_CA="path_to_database_ca_certificate"  # Optional for SSL

# Google Gemini API
GOOGLE_API_KEY="your_gemini_api_key"
```

Use `demo env` as a template.

## ğŸ“¦ How to Run Locally

### Prerequisites
- Python 3.10 or higher
- MySQL database
- Google Gemini API key

### Setup

1. **Clone the repository**
```bash
git clone <repository-url>
cd google-kaggle-capstone
```

2. **Set up environment variables**
```bash
cp "demo env" .env
# Edit .env with your actual credentials
```

3. **Install dependencies**
```bash
pip install -r requirements.txt
```

4. **Initialize the database**
```bash
# Run the SQL script in your MySQL database
mysql -u your_user -p your_database < Backend/create.sql
```

### Running the Application

#### Option 1: Run Locally

**1ï¸âƒ£ Start the Backend**
```bash
cd Backend
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```
Backend will be available at: `http://localhost:8000`

**2ï¸âƒ£ Start the Frontend**
```bash
cd frontend
streamlit run app.py
```
Frontend will be available at: `http://localhost:8501`

#### Option 2: Run with Docker

**1ï¸âƒ£ Build and run Backend**
```bash
cd Backend
docker build -t character-ai-backend .
docker run -p 8000:8000 --env-file ../.env character-ai-backend
```

**2ï¸âƒ£ Build and run Frontend**
```bash
cd frontend
docker build -t character-ai-frontend .
docker run -p 8501:8501 --env-file ../.env character-ai-frontend
```

## ğŸš€ Deployment

### Deploy to Hugging Face Spaces

This project is designed for deployment on Hugging Face Spaces using Docker:

#### Backend Deployment

1. **Create a new Space** on Hugging Face:
   - Go to [huggingface.co/spaces](https://huggingface.co/spaces)
   - Click "Create new Space"
   - Choose **Docker** as the SDK
   - Name it (e.g., `character-ai-backend`)

2. **Configure the Space**:
   - Push the `Backend/` directory contents to your Space repository
   - The `Dockerfile` in the Backend folder will be used automatically

3. **Add Secrets** (Environment Variables):
   - Go to Space Settings â†’ Repository secrets
   - Add all variables from your `.env` file:
     - `DB_HOST`
     - `DB_PASSWORD`
     - `DB_USER`
     - `DB_NAME`
     - `DB_PORT`
     - `DB_CA` (if using SSL)
     - `GOOGLE_API_KEY`

4. **Deploy**: Hugging Face will automatically build and deploy your backend

#### Frontend Deployment

1. **Create another Space** for the frontend:
   - Choose **Docker** as the SDK
   - Name it (e.g., `character-ai-frontend`)

2. **Configure the Space**:
   - Push the `frontend/` directory contents to your Space repository
   - Update the backend API URL in `app.py` to point to your deployed backend Space

3. **Add Secrets**: Add the same environment variables as the backend

4. **Deploy**: Hugging Face will automatically build and deploy your frontend

#### Important Notes:
- Both frontend and backend need to be deployed as separate Spaces
- Update the API endpoint in the frontend to point to your backend Space URL
- Ensure your MySQL database is accessible from Hugging Face servers
- Consider using a cloud-hosted MySQL instance (e.g., PlanetScale, AWS RDS, Google Cloud SQL)

## ğŸ”— API Documentation

Once the backend is running, visit:
- **Swagger UI**: `http://localhost:8000/docs`
- **ReDoc**: `http://localhost:8000/redoc`

## ğŸ§ª Testing

Access the application:
1. Open the Streamlit frontend
2. Register a new account
3. Create a persona (e.g., "Sherlock Holmes")
4. Start chatting with your persona
5. View conversation history

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## ğŸ“œ License

MIT License

## ğŸ‘¥ Authors

Google Kaggle Capstone Project Team

## ğŸ™ Acknowledgments

- Google Gemini API for LLM capabilities
- FastAPI and Streamlit communities
- MySQL database
